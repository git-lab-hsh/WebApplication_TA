(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{399:function(t,e,n){var content=n(401);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("39078716",content,!0,{sourceMap:!1})},400:function(t,e,n){"use strict";var l=n(399);n.n(l).a},401:function(t,e,n){(e=n(14)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css?family=Noto+Sans+TC:300,400,700&display=swap&subset=chinese-traditional);"]),e.push([t.i,".el-breadcrumb__outer[data-v-afaa6664]{background-color:#e9edf2}.el-breadcrumb[data-v-afaa6664]{padding:5px 16px;line-height:1.25rem;max-width:1280px;margin:0 auto}@media screen and (max-width:768px){.el-breadcrumb[data-v-afaa6664]{padding-top:20px}}",""]),t.exports=e},402:function(t,e,n){"use strict";var l={props:{currentPage:{type:String},previousPage:{type:Array},mode:{type:Boolean,default:!0}}},r=(n(400),n(4)),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"el-breadcrumb__outer"},[1==t.mode?n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[n("i",{staticClass:"fas fa-home",attrs:{title:"Home"}})]),t._v(" "),t._l(t.previousPage,(function(e,l){return n("el-breadcrumb-item",{key:l,attrs:{to:{path:e.link}}},[t._v("\n        "+t._s(e.title)+"\n      ")])})),t._v(" "),n("el-breadcrumb-item",[n("span",{domProps:{innerHTML:t._s(t.currentPage)}})])],2):n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[n("i",{staticClass:"fas fa-home",attrs:{title:"Home"}})]),t._v(" "),t._l(t.previousPage,(function(e,l){return n("el-breadcrumb-item",{key:l},[t._v("\n        "+t._s(e.title)+"\n      ")])})),t._v(" "),n("el-breadcrumb-item",[n("span",{domProps:{innerHTML:t._s(t.currentPage)}})])],2)],1),t._v(" "),n("a",{attrs:{accesskey:"C",id:"content",href:"javascript:;"}},[t._v(":::")])])}),[],!1,null,"afaa6664",null);e.a=component.exports},405:function(t,e,n){var content=n(410);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("fd9a4c54",content,!0,{sourceMap:!1})},409:function(t,e,n){"use strict";var l=n(405);n.n(l).a},410:function(t,e,n){(e=n(14)(!1)).push([t.i,".custom-table-font[data-v-7ccf162a]{color:#73737d}",""]),t.exports=e},411:function(t,e,n){"use strict";var l={name:"Datatable",data:function(){return{goTo:"zh"==this.lang?"前往 ":"Go to ",orderBy:"zh"==this.lang?"排序 ":"Order by "}},props:{tableHeaders:{type:Array,required:!0},tableData:{type:Array,required:!0},lang:{type:String,default:"zh"}},methods:{handleSort:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.$emit("handleSort",{val:t,index:e,mode:n})},doRead:function(t,e){this.$emit("subscriptionRead",{nid:t,index:e})}}},r=(n(409),n(4)),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-data-table",{attrs:{headers:t.tableHeaders,items:t.tableData,"disable-pagination":!0,"hide-default-footer":!0},scopedSlots:t._u([t._l(t.tableHeaders,(function(content,e){return{key:"header."+content.value,fn:function(l){var header=l.header;return[n("div",{key:content.value},[void 0!==header.order?n("span",{staticClass:"data-header",staticStyle:{"font-size":"0.9rem"},on:{click:function(n){return t.handleSort(header,e)}}},[t._v("\n          "+t._s(header.text)+"\n          "),""==header.order?n("button",{staticClass:"sort-button",on:{keydown:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.stopPropagation(),t.handleSort(header,e,1))}}},[n("span",{staticClass:"sr-only"},[t._v(t._s(t.orderBy)+t._s(header.text))]),t._v(" "),n("i",{staticClass:"fas fa-sort"})]):"descending"==header.order?n("button",{staticClass:"sort-button",on:{keydown:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.stopPropagation(),t.handleSort(header,e,1))}}},[n("span",{staticClass:"sr-only"},[t._v(t._s(t.orderBy)+t._s(header.text))]),t._v(" "),n("i",{staticClass:"fas fa-sort-up"})]):"ascending"==header.order?n("button",{staticClass:"sort-button",on:{keydown:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.stopPropagation(),t.handleSort(header,e,1))}}},[n("span",{staticClass:"sr-only"},[t._v(t._s(t.orderBy)+t._s(header.text))]),t._v(" "),n("i",{staticClass:"fas fa-sort-down"})]):t._e()]):n("span",{staticStyle:{"font-size":"0.9rem",cursor:"default"}},[t._v("\n          "+t._s(header.text)+"\n        ")])])]}}})),{key:"item.title",fn:function(e){var l=e.item;return[l.link?n("router-link",{attrs:{title:t.goTo+l.title,to:l.link}},[t._v(t._s(l.title))]):l.nid?n("router-link",{attrs:{title:t.goTo+l.title,to:"/datasets/"+l.nid}},[t._v(t._s(l.title))]):n("span",[t._v(t._s(l.title))])]}},{key:"item.agency",fn:function(e){var l=e.item;return[l.link?n("router-link",{attrs:{title:t.goTo+l.agency,to:l.link}},[t._v(t._s(l.agency))]):n("span",[t._v(t._s(l.agency))])]}},{key:"item.title.keyword",fn:function(e){var l=e.item;return[l.sno&&"zh"==t.lang?n("router-link",{attrs:{title:t.goTo+l.title,to:"/news/"+l.sno}},[t._v(t._s(l.title))]):l.sno&&"en"==t.lang?n("router-link",{attrs:{title:t.goTo+l.title,to:"/en/news/"+l.sno}},[t._v(t._s(l.title))]):l.nid?n("router-link",{attrs:{title:t.goTo+l.title,to:"/dataset/"+l.nid}},[t._v(t._s(l.title))]):t._e(),t._v(" "),l.sno&&"zh"==t.lang?n("div",{staticClass:"color-hint"},[t._v(t._s(l.type_name))]):t._e()]}},{key:"item.update_notification",fn:function(e){var l=e.item;return[""==l.update_notification?n("div",[t._v(t._s(l.update_notification))]):n("div",{staticStyle:{color:"#0079B7",cursor:"pointer"},on:{click:function(e){t.doRead(l.nid,t.tableData.map((function(t){return t.nid})).indexOf(l.nid))}}},[t._v("\n        "+t._s(l.update_notification)+"\n      ")])]}},{key:"item.vote_average_percent",fn:function(t){var e=t.item;return[n("el-rate",{attrs:{value:parseFloat((e.vote_average_percent/20).toFixed(1)),"show-score":"","text-color":"#ff9900","score-template":"{value}顆星",disabled:""}})]}},{key:"item.pubdate.date",fn:function(e){var l=e.item;return[l.pubdate?n("span",[t._v("\n        "+t._s(l.pubdate.date.slice(0,10).split("-").join("/"))+"\n      ")]):t._e()]}},{key:"item.name",fn:function(e){var l=e.item,header=e.header;return["number"==typeof l.tid&&2==header.type?n("router-link",{attrs:{title:"前往 "+l.name,to:"/datasets/search?topic_tid="+l.tid}},[t._v("\n        "+t._s(l.name)+"\n      ")]):"number"==typeof l.tid&&3==header.type?n("router-link",{attrs:{title:"前往 "+l.name,to:"/datasets/search?ct="+l.tid}},[t._v("\n        "+t._s(l.name)+"\n      ")]):"number"==typeof l.tid&&4==header.type?n("router-link",{attrs:{title:"前往 "+l.name,to:"/datasets/search?qs="+l.tid}},[t._v("\n        "+t._s(l.name)+"\n      ")]):n("span",[t._v(t._s(l.name))])]}}],null,!0)},[t._v(" "),t._v(" "),t._v(" "),t._v(" "),t._v(" "),t._v(" "),t._v(" "),t._v(" "),n("template",{slot:"no-data"},["zh"==t.lang?n("div",{staticClass:"custom-table-font"},[t._v("無資料")]):n("div",{staticClass:"custom-table-font"},[t._v("No data available")])])],2)],1)}),[],!1,null,"7ccf162a",null);e.a=component.exports},579:function(t,e,n){var content=n(665);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("c78d83c6",content,!0,{sourceMap:!1})},580:function(t,e,n){var content=n(667);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(15).default)("007d28e8",content,!0,{sourceMap:!1})},664:function(t,e,n){"use strict";var l=n(579);n.n(l).a},665:function(t,e,n){(e=n(14)(!1)).push([t.i,".el-rate[data-v-33be3806]:focus{outline-width:1px;display:inline-block}",""]),t.exports=e},666:function(t,e,n){"use strict";var l=n(580);n.n(l).a},667:function(t,e,n){(e=n(14)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css?family=Noto+Sans+TC:300,400,700&display=swap&subset=chinese-traditional);"]),e.push([t.i,'.custom-table .table-row .table-cell[data-v-51840195]{padding-top:16px}.custom-table .table-row .table-cell[data-v-51840195]:first-child{padding-right:8px}@media screen and (max-width:540px){.custom-table .table-row .table-cell[data-v-51840195]:first-child{width:100%;padding-right:0}}.custom-table .table-row .table-cell[data-v-51840195]:last-child{padding-left:8px;width:60%}@media screen and (max-width:540px){.custom-table .table-row .table-cell[data-v-51840195]:last-child{width:100%;padding-left:0}}.custom-carousel[data-v-51840195]{position:relative}.custom-carousel .el-carousel__item[data-v-51840195]{text-align:center}.custom-carousel .el-carousel__item[data-v-51840195]:before{content:"";display:inline-block;vertical-align:middle;width:0;height:100%}.custom-carousel .normal-list[data-v-51840195]{display:inline-block;text-align:left;width:70%;vertical-align:middle;margin:0 auto}@media screen and (max-width:540px){.custom-carousel .normal-list[data-v-51840195]{width:calc(100% - 80px)}}.custom-carousel .normal-list .normal-item[data-v-51840195]{margin-bottom:0;padding-left:80px}@media screen and (max-width:540px){.custom-carousel .normal-list .normal-item[data-v-51840195]{padding-left:70px}}.custom-carousel .normal-list .normal-item-image[data-v-51840195]{width:70px;height:70px}@media screen and (max-width:540px){.custom-carousel .normal-list .normal-item-image[data-v-51840195]{width:60px;height:60px}}.custom-carousel .custom-carousel-btn-left[data-v-51840195]{position:absolute;width:30px;height:30px;border-radius:50%;padding:0;top:calc(50% - 15px);left:10px;z-index:2}@media screen and (max-width:540px){.custom-carousel .custom-carousel-btn-left[data-v-51840195]{left:0}}.custom-carousel .custom-carousel-btn-right[data-v-51840195]{position:absolute;width:30px;height:30px;border-radius:50%;padding:0;top:calc(50% - 15px);right:10px;z-index:2}@media screen and (max-width:540px){.custom-carousel .custom-carousel-btn-right[data-v-51840195]{right:0}}[data-v-51840195] .el-carousel__container{height:auto;min-height:200px}.el-card[data-v-51840195]{height:350px}[data-v-51840195] .el-card__body{overflow-y:auto;max-height:290px}.nodata[data-v-51840195]{text-align:center;padding-top:100px}.icon-button[data-v-51840195]:focus{color:#0079b7}.icon-button[data-v-51840195]{cursor:default;padding-bottom:5px}[data-v-51840195] .el-tag,[data-v-51840195] .el-tag a{color:#303133}.custom-button[data-v-51840195]{font-size:.75rem;border-radius:3px;display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;border:1px solid #dcdfe6;color:#606266;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:0;margin:0;transition:.1s;font-weight:500;padding:12px 20px}',""]),t.exports=e},680:function(t,e,n){"use strict";n.r(e);n(60),n(16),n(32);var l=n(33),r=(n(7),n(31),n(52),n(20),n(2)),o=n(402),c=(n(241),{name:"ElRate",inject:{elForm:{default:""}},data:function(){return{pointerAtLeftHalf:!0,currentValue:this.value,hoverIndex:-1}},props:{value:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Array,default:function(){return["#F7BA2A","#F7BA2A","#F7BA2A"]}},voidColor:{type:String,default:"#C6D1DE"},disabledVoidColor:{type:String,default:"#EFF2F7"},iconClasses:{type:Array,default:function(){return["el-icon-star-on","el-icon-star-on","el-icon-star-on"]}},voidIconClass:{type:String,default:"el-icon-star-off"},disabledVoidIconClass:{type:String,default:"el-icon-star-on"},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"#1f2d3d"},texts:{type:Array,default:function(){return["極差","失望","一般","滿意","很棒"]}},scoreTemplate:{type:String,default:"{value}"}},computed:{text:function(){var t="";return this.showScore?t=this.scoreTemplate.replace(/\{\s*value\s*\}/,this.rateDisabled?this.value:this.currentValue):this.showText&&(t=this.texts[Math.ceil(this.currentValue)-1]),t},decimalStyle:function(){var t="";return this.rateDisabled&&(t=this.valueDecimal<50?0:50,t+=t+"%"),this.allowHalf&&(t="50%"),{color:this.activeColor,width:t}},valueDecimal:function(){return 100*this.value-100*Math.floor(this.value)},decimalIconClass:function(){return this.getValueFromMap(this.value,this.classMap)},voidClass:function(){return this.rateDisabled?this.classMap.disabledVoidClass:this.classMap.voidClass},activeClass:function(){return this.getValueFromMap(this.currentValue,this.classMap)},colorMap:function(){return{lowColor:this.colors[0],mediumColor:this.colors[1],highColor:this.colors[2],voidColor:this.voidColor,disabledVoidColor:this.disabledVoidColor}},activeColor:function(){return this.getValueFromMap(this.currentValue,this.colorMap)},classes:function(){var t=[],i=0,e=this.currentValue;for(this.allowHalf&&this.currentValue!==Math.floor(this.currentValue)&&e--;i<e;i++)t.push(this.activeClass);for(;i<this.max;i++)t.push(this.voidClass);return t},classMap:function(){return{lowClass:this.iconClasses[0],mediumClass:this.iconClasses[1],highClass:this.iconClasses[2],voidClass:this.voidIconClass,disabledVoidClass:this.disabledVoidIconClass}},rateDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(t){this.currentValue=t,this.pointerAtLeftHalf=this.value!==Math.floor(this.value)}},methods:{getMigratingConfig:function(){return{props:{"text-template":"text-template is renamed to score-template."}}},getValueFromMap:function(t,map){return t<=this.lowThreshold?map.lowColor||map.lowClass:t>=this.highThreshold?map.highColor||map.highClass:map.mediumColor||map.mediumClass},showDecimalIcon:function(t){var e=this.rateDisabled&&this.valueDecimal>0&&t-1<this.value&&t>this.value,n=this.allowHalf&&this.pointerAtLeftHalf&&t-.5<=this.currentValue&&t>this.currentValue;return e||n},getIconStyle:function(t){var e=this.rateDisabled?this.colorMap.disabledVoidColor:this.colorMap.voidColor;return{color:t<=this.currentValue?this.activeColor:e}},selectValue:function(t){this.rateDisabled||(this.allowHalf&&this.pointerAtLeftHalf?(this.$emit("input",this.currentValue),this.$emit("click",this.currentValue)):(this.$emit("input",t),this.$emit("click",t)))},handleKey:function(t){if(!this.rateDisabled){var e=this.currentValue,n=t.keyCode;38===n||39===n?(this.allowHalf?e+=.5:e+=1,t.stopPropagation(),t.preventDefault()):37!==n&&40!==n||(this.allowHalf?e-=.5:e-=1,t.stopPropagation(),t.preventDefault()),e=(e=e<0?0:e)>this.max?this.max:e,this.$emit("input",e),13==n&&this.$emit("click",e)}},setCurrentValue:function(t,e){if(!this.rateDisabled){if(this.allowHalf){var n=e.target;n.classList.contains("el-rate__item")&&(n=n.querySelector(".el-rate__icon")),n.classList.contains("el-rate__decimal")&&(n=n.parentNode),this.pointerAtLeftHalf=2*e.offsetX<=n.clientWidth,this.currentValue=this.pointerAtLeftHalf?t-.5:t}else this.currentValue=t;this.hoverIndex=t}},resetCurrentValue:function(){this.rateDisabled||(this.allowHalf&&(this.pointerAtLeftHalf=this.value!==Math.floor(this.value)),this.currentValue=this.value,this.hoverIndex=-1)}},created:function(){this.value||this.$emit("input",0)}}),d=(n(664),n(4)),v=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-rate",attrs:{role:"slider","aria-valuenow":t.currentValue,"aria-valuetext":t.text,"aria-valuemin":"0","aria-valuemax":t.max,"aria-labelledby":"idRate",tabindex:"0"},on:{keydown:t.handleKey}},[t._l(t.max,(function(e,l){return n("span",{key:l,staticClass:"el-rate__item",style:{cursor:t.rateDisabled?"auto":"pointer"},on:{mousemove:function(n){return t.setCurrentValue(e,n)},mouseleave:t.resetCurrentValue,click:function(n){return t.selectValue(e)}}},[n("i",{staticClass:"el-rate__icon",class:[t.classes[e-1],{hover:t.hoverIndex===e}],style:t.getIconStyle(e)},[n("span",{staticClass:"sr-only"},[n("div",[t._v(t._s(e)+" star")])]),t._v(" "),t.showDecimalIcon(e)?n("i",{staticClass:"el-rate__decimal",class:t.decimalIconClass,style:t.decimalStyle}):t._e()])])})),t._v(" "),t.showText||t.showScore?n("span",{staticClass:"el-rate__text",style:{color:t.textColor}},[t._v(t._s(t.text))]):t._e()],2)}),[],!1,null,"33be3806",null).exports,_=n(411),m={name:"DatasetDetail",head:function(){return{title:this.pageData.title+" ",meta:[{hid:"title",name:"title",content:this.pageData.title+" "},{hid:"description",name:"description",content:this.pageData.content+" "},{hid:"og:title",property:"og:title",content:this.pageData.title+" "},{hid:"og:description",property:"og:description",content:this.pageData.content+" "}],script:[{type:"application/ld+json",json:this.jsonLDData}]}},validate:function(t){var e=t.params;return/^\d+$/.test(e.id)},components:{Breadcrumbs:o.a,Rating:v,Datatable:_.a},data:function(){return{dataset_id:this.$route.params.id,api_url:"https://data.gov.tw",rating:0,ratingResult:{score:0,vote:0},inputVisible:!1,inputValue:"",dialogVisible:[],dialogAddResponse:!1,responseForm:{nid:this.$route.params.id,mail:[this.$util.getUserData("mail")],comment_industry:"",comment_type:"",comment_identity:"",title:"",body:""},opinionOptions:[],industryOptions:[],identityOptions:[],responseSortOptions:[],comment:[],rules:{mail:[{required:!0,message:"請輸入",trigger:"blur"},{type:"email",message:"請輸入正確電子信箱格式",trigger:["blur","change"]}],responseValuesOther:[{type:"email",message:"請輸入正確電子信箱格式",trigger:["blur","change"]}],comment_type:[{required:!0,message:"請選擇",trigger:"change"}],comment_industry:[{required:!0,message:"請選擇",trigger:"change"}],comment_identity:[{required:!0,message:"請選擇",trigger:"change"}],title:[{required:!0,message:"請輸入",trigger:"blur"},{max:255,message:"超過 255 字元，請刪減名稱",trigger:"blur"}],body:[{required:!0,message:"請輸入",trigger:"blur"}]},allTags:[],allTagSuggest:[],loginFlag:!1,jsonLoad:!0,jsonHeader:[],jsonData:[],qualityColor:{csv:{color:"#e00085",fontColor:"#e00085",background:"white"},xlsx:{color:"#3379b5",fontColor:"#3379b5",background:"white"},ods:{color:"#3379b5",fontColor:"#3379b5",background:"white"},xml:{color:"#097c25",fontColor:"#097c25",background:"white"},json:{color:"#005e15",fontColor:"#005e15",background:"white"}},qualityColorOrigin:{},resourcesField:[]}},asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,l,r,o,data,c,d,v,content,_,m,i,h,f,C,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.app,l=t.params,t.store,t.router,r=t.redirect,o=t.env,data=n.$api.getDatasetDetail(l.id),e.next=4,data.then((function(t){200==t.data.code&&1==t.data.success?(c=t.data.payload).content=c.content.replace(/\n/g,"<br>"):r("/error")})).catch((function(t){r("/error")}));case 4:if(d=[],v={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,item:{"@id":o.BASE_URL,name:"Home"}},{"@type":"ListItem",position:2,item:{"@id":o.BASE_URL+"/dataset",name:"資料集"}},{"@type":"ListItem",position:3,item:{"@id":o.BASE_URL+"/dataset/"+l.id,name:c.title}}]},content="",void 0!==c.content)if(c.content.length>=50&&c.content.length<=5e3)content=c.content;else if(c.content.length<50){for(_="",m=50-c.content.length,i=0;i<m;i++)_+=".";content=c.content+_}else c.content.length>5e3&&(content=c.content.slice(0,5e3));return h=[],c.tags.forEach((function(element){""!=element.name&&h.push(element.name)})),f=[],c.resources.forEach((function(element){f.push({"@type":"DataDownload",encodingFormat:element.file_format,contentUrl:element.url})})),C={"@context":"https://schema.org/","@type":"Dataset",name:c.title,description:content,url:o.BASE_URL+"/dataset/"+l.id,identifier:l.uuid,keywords:h,license:o.BASE_URL+"/license",creator:{"@type":"Organization",name:c.agency_name},distribution:f},d.push(v,C),a={pageData:c,jsonLDData:d},e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))()},methods:{handleResourceDialog:function(){for(var i=0;i<this.pageData.resources.length;i++)this.dialogVisible[i]=!1},addDownload:function(){var t=this,input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0;0==input&&window.open(e);var data=this.$api.addDatasetDownloadtimes(this.pageData.nid);data.then((function(e){200==e.data.code&&1==e.data.success||t.$router.push("/error")})).catch((function(e){t.$router.push("/error")}))},showInput:function(){this.inputVisible=!0},handleInputConfirm:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.inputValue)&&t.allTagSuggest.push(n),t.inputVisible=!1,data=t.$api.addDatasetTag(t.pageData.nid,t.inputValue),e.next=6,data.then((function(e){200==e.data.code&&1==e.data.success?(t.$message({message:"您對本資料集建議增加關鍵字「"+t.inputValue+"」，謝謝您的參與。",type:"success",showClose:!0}),t.inputValue=""):t.$message({message:"發生錯誤!",type:"danger",showClose:!0})})).catch((function(e){t.$router.push("/error")}));case 6:t.inputValue="";case 7:case"end":return e.stop()}}),e)})))()},ratinging:function(){var t=this;this.rating>0&&this.$api.addDatasetRating(this.pageData.nid,this.rating).then((function(e){200==e.data.code&&1==e.data.success?(t.$message({message:"評分成功",type:"success",showClose:!0}),t.ratingResult={score:e.data.payload.vote_average,vote:e.data.payload.vote_quantity}):t.$message({message:"發生錯誤!",type:"danger",showClose:!0})})).catch((function(e){t.$router.push("/error")}))},doSubscribe:function(t){var e=this;this.$api.doDatasetSubscribe(this.pageData.nid,t).then((function(n){200==n.data.code&&1==n.data.success?(e.$message({message:1==t?"訂閱成功":"已取消訂閱",type:"success",showClose:!0}),e.pageData.is_subscribed=1==t):e.$message({message:"發生錯誤!",type:"danger",showClose:!0})})).catch((function(t){e.$router.push("/error")}))},doPrint:function(){for(var t=this,i=0;i<this.dialogVisible.length;i++)this.dialogVisible.splice(i,1,!0);var title=document.getElementsByClassName("print-title"),content=document.getElementsByClassName("subtitle"),a=document.getElementsByClassName("table table--fixed od-table od-table--bordered");setTimeout((function(){var b=document.getElementsByClassName("table table--fixed custom-table"),e=window.open("","","width=1200,height=960");e.document.write('<html><head><style type="text/css">'),e.document.write(".table {display:table; width:100%}"),e.document.write(".table.table--fixed {table-layout:fixed}"),e.document.write(".table-row {display: table-row}"),e.document.write(".od-table.od-table--bordered .table-cell {padding:10px; border-bottom: 1px solid #DCDFE6}"),e.document.write(".od-table.od-table--bordered .th {background-color: #E9EDF2}"),e.document.write(".od-table.table--fixed .th {width:160px}"),e.document.write(".aside-block {border:1px solid #E9EDF2; border-radius:4px; overflow:hidden; margin-bottom:16px;}"),e.document.write(".aside-block .aside-title {padding:10px; line-height:1.5; border-bottom:1px solid #E9EDF2}"),e.document.write(".aside-block .aside-content {padding:10px}"),e.document.write(".table-cell {display: table-cell; line-height:1.5}"),e.document.write('body{font-size: 1rem;font-family:"Noto Sans TC", "helvatica", "Arial", sans-serif, "微軟正黑體"'),e.document.write("</style></head>"),e.document.write(title[0].outerHTML),e.document.write(content[0].outerHTML);for(var n=0;n<a.length;n++)e.document.write(a[n].outerHTML);e.document.write(b[0].outerHTML),e.document.close("</body></html>"),e.focus(),e.print();for(var l=0;l<t.dialogVisible.length;l++)t.dialogVisible.splice(l,1,!1)}),1e3)},removeResponseValue:function(t){var e=this.responseForm.mail.indexOf(t);-1!==e&&this.responseForm.mail.splice(e,1)},addResponseValue:function(){this.responseForm.mail.push("")},submitForm:function(t){var e=this;this.$refs[t].validate(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(n){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=17;break}return t.prev=1,t.next=4,e.$recaptcha.execute("login");case 4:l=t.sent,e.responseForm.token=l,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Login error:",t.t0);case 11:e.dialogAddResponse=!1,e.responseForm.mail=JSON.stringify(e.responseForm.mail),e.$api.addDatasetComment(e.responseForm).then((function(t){200==t.data.code&&1==t.data.success?e.$message({message:"您的回應已送出到待審核內容，待管理者審核後才會被發佈。",type:"success",showClose:!0}):e.$message({message:t.data.message,type:"danger",showClose:!0})})).catch((function(t){e.$router.push("/error")})),t.next=19;break;case 17:return e.$message({message:"請輸入必填欄位，謝謝。",type:"error",showClose:!0}),t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}())},resetResponseDialog:function(){this.responseForm={nid:this.$route.params.id,mail:[this.$util.getUserData("mail")],comment_industry:"",comment_type:"",comment_identity:"",title:"",body:""}},initComment:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={nid:t.$route.params.id},data=t.$api.getDatasetComment(n),e.next=4,data.then((function(e){if(200==e.data.code&&1==e.data.success){if(t.comment=e.data.payload.results,0==t.comment.length)return void console.log("no comment");for(var n,l=[],i=0;i<t.comment.length;i++)for(var r in"",n="",l[i]=[],l[i].user_main={},l[i].agency_r1={},l[i].user_r1={},l[i].user_r2={},l[i].agency_r2={},l[i].agency_supply_r1=[],l[i].agency_supply_r2=[],t.comment[i])if("reply"!=r)l[i].user_main[r]=t.comment[i][r],"uid"==r&&(n=t.comment[i][r]);else if(void 0!==t.comment[i][r])for(var o in t.comment[i][r][0])if("reply"!=o)l[i].agency_r1[o]=t.comment[i][r][0][o];else if(void 0!==t.comment[i][r][0][o])for(var c=0;c<t.comment[i][r][0][o].length;c++)if(t.comment[i][r][0][o][c].uid!=n)l[i].agency_supply_r1.push(t.comment[i][r][0][o][c]);else for(var d in t.comment[i][r][0][o][c])if("reply"!=d)l[i].user_r1[d]=t.comment[i][r][0][o][c][d];else if(void 0!==t.comment[i][r][0][o][c][d])for(var v in t.comment[i][r][0][o][c][d][0])if("reply"!=v)l[i].agency_r2[v]=t.comment[i][r][0][o][c][d][0][v];else if(void 0!==t.comment[i][r][0][o][c][d][0][v])for(var _=0;_<t.comment[i][r][0][o][c][d][0][v].length;_++)if(t.comment[i][r][0][o][c][d][0][v][_].uid!=n)l[i].agency_supply_r2.push(t.comment[i][r][0][o][c][d][0][v][_]);else for(var m in t.comment[i][r][0][o][c][d][0][v][_])l[i].user_r2[m]=t.comment[i][r][0][o][c][d][0][v][_][m];t.comment=l}else t.$router.push("/error")})).catch((function(e){t.$router.push("/error")}));case 4:case"end":return e.stop()}}),e)})))()},initCommentOptions:function(t){var e=this,n={code:t};this.$api.getDatasetCommentOptions(n).then((function(n){if(1==n.data.success&&200==n.data.code){var l=n.data.payload;"suggest_industry"==t?l.forEach((function(t,n){e.industryOptions.push({value:t.code_value,label:t.code_name})})):"suggest_identity"==t?l.forEach((function(t,n){e.identityOptions.push({value:t.code_value,label:t.code_name})})):"comment_type"==t&&l.forEach((function(t,n){e.opinionOptions.push({value:t.code_value,label:t.code_name})}))}else e.$router.push("/error")})).catch((function(){e.$router.push("/error")}))},handleTags:function(){var t=this;this.pageData.tags.forEach((function(element){""!=element.name&&t.allTags.push({name:element.name,tag_tid:element.tag_tid})})),this.pageData.tag_suggest.forEach((function(element){t.allTagSuggest.push(element)}))},checkDatasetStatus:function(){return["f01","f05","f07"].indexOf(this.pageData.dataset_status)<0},openDialog:function(t){var e=this;if(setTimeout((function(){for(var t=document.getElementsByClassName("el-dialog__headerbtn"),i=0;i<t.length;i++)t[i].focus()})),this.dialogVisible.splice(t,1,!0),void 0!==this.pageData.resources[t].quality_download.json){this.jsonHeader=[],this.qualityColorOrigin=JSON.parse(JSON.stringify(this.qualityColor));var n=this.pageData.resources[t].quality_download.json;this.$api.getJson(n).then((function(t){t.json().then((function(t){if(t.length<=10?e.jsonData=t:e.jsonData=t.slice(0,10),"object"==Object(l.a)(t[0]))for(var text=Object.keys(t[0]),i=0;i<text.length;i++)e.jsonHeader.push({text:text[i],sortable:!1,value:text[i],width:"1%"})})).catch((function(){})).finally((function(){e.jsonLoad=!1}))}))}},handleResourceField:function(){for(var t,e=this.pageData.resources,n=[],i=0;i<e.length;i++){if(n=[],t=e[i].field_desc,"object"==Object(l.a)(t))for(var r=0;r<t.length;r++)null!=t[r].desc&&""!=t[r].desc?n.push(t[r].name+"("+t[r].desc+")"):n.push(t[r].name);else"string"==typeof t&&n.push(t);this.resourcesField.push(n.join("、"))}},carPrev:function(){this.$refs.car.prev()},carNext:function(){this.$refs.car.next()},changeColor:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"in";"in"==n?(this.qualityColor[t].color="black",this.qualityColor[t].background=e,this.qualityColor[t].fontColor="white"):(this.qualityColor[t].color=this.qualityColorOrigin[t].color,this.qualityColor[t].background="white",this.qualityColor[t].fontColor=this.qualityColorOrigin[t].color)},closeDialog:function(t){document.getElementById("resource"+t).focus()},checkUrl:function(t){var e=t.split(".").pop();return["pdf","csv","ppt","xlsx","xls","pptx","json","xml"].indexOf(e)>-1}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.initComment(),t.handleResourceDialog(),t.handleResourceField(),t.initCommentOptions("suggest_industry"),t.initCommentOptions("suggest_identity"),t.initCommentOptions("comment_type"),1==t.pageData.is_voted&&(t.rating=t.pageData.real_vote_value),t.ratingResult={score:""!=t.pageData.vote_average_ori?t.pageData.vote_average_ori:0,vote:t.pageData.vote_quantity},t.handleTags(),"true"==localStorage.getItem("ndc_front_login")&&(t.loginFlag=!0,t.$recaptcha.init());case 11:case"end":return e.stop()}}),e)})))()},created:function(){},watch:{dialogAddResponse:function(t){1==t?(setTimeout((function(){for(var t=document.getElementsByClassName("el-dialog__headerbtn"),i=0;i<t.length;i++)t[i].focus()})),void 0!==this.$refs.responseForm&&this.$refs.responseForm.resetFields()):document.getElementById("responseBtn").focus()}}},h=(n(666),Object(d.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Breadcrumbs",{attrs:{"previous-page":[{link:"/datasets/search",title:"資料集"}],"current-page":t.pageData.title}}),t._v(" "),n("div",{staticClass:"page page--dataset-detail"},[n("div",{staticClass:"dataset-detail-header align-center"},[n("h2",{staticClass:"print-title"},[t._v(t._s(t.pageData.title))]),t._v(" "),n("div",{staticClass:"subtitle",domProps:{innerHTML:t._s(t.pageData.content)}}),t._v(" "),1==t.checkDatasetStatus()?n("div",{staticClass:"rating"},[n("div",{staticClass:"color-hint",staticStyle:{color:"#676B6F"},attrs:{id:"idRate"}},[t._v("評分此資料集：")]),t._v(" "),n("Rating",{on:{click:t.ratinging},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}}),t._v(" "),n("div",{staticClass:"rating-text"},[t._v("\n          平均 "+t._s(t.ratingResult.score.toFixed(2))+" ("+t._s(t.ratingResult.vote)+" 人次投票)\n        ")])],1):t._e(),t._v(" "),t.loginFlag&&1==t.checkDatasetStatus()?n("div",[t.pageData.is_subscribed?n("el-button",{staticClass:"btn-book",attrs:{type:"primary"},on:{click:function(e){return t.doSubscribe(0)}}},[n("div",[n("i",{staticClass:"fas fa-book-reader"})]),t._v(" "),n("div",[t._v("已訂閱")])]):n("el-button",{staticClass:"btn-book",attrs:{type:"primary",plain:""},on:{click:function(e){return t.doSubscribe(1)}}},[n("div",[n("i",{staticClass:"fas fa-book-reader"})]),t._v(" "),n("div",[t._v("訂閱")])])],1):t._e()]),t._v(" "),n("div",{staticClass:"dataset-detail-container"},[n("div",{staticClass:"toolbar"},[n("div",{staticClass:"toolbar-item"},["金"==t.pageData.quality_badge_type?n("div",{staticClass:"item-group award type-1",attrs:{title:"金標章"}},[t._m(0)]):t._e(),t._v(" "),"銀"==t.pageData.quality_badge_type?n("div",{staticClass:"item-group award type-2",attrs:{title:"銀標章"}},[t._m(1)]):t._e(),t._v(" "),"銅"==t.pageData.quality_badge_type?n("div",{staticClass:"item-group award type-3",attrs:{title:"銅標章"}},[t._m(2)]):t._e(),t._v(" "),"金"==t.pageData.quality_badge_type&&"白金"==t.pageData.schema_badge_type?n("div",{staticClass:"item-group award type-2",attrs:{title:"白金標章"}},[t._m(3)]):t._e(),t._v(" "),n("div",{staticClass:"item-group"},[n("span",{staticClass:"icon-button"},[n("span",{staticClass:"sr-only"},[t._v("瀏覽次數 "+t._s(t.pageData.dataset_view_times)+" 次")]),t._v(" "),n("i",{staticClass:"fas fa-eye"})]),t._v("\n            瀏覽次數: "+t._s(t.pageData.dataset_view_times)+"\n          ")]),t._v(" "),n("div",{staticClass:"item-group"},[n("span",{staticClass:"icon-button"},[n("span",{staticClass:"sr-only"},[t._v("下載次數 "+t._s(t.pageData.resource_download_times)+" 次")]),t._v(" "),n("i",{staticClass:"fas fa-download"})]),t._v("\n            下載次數: "+t._s(t.pageData.resource_download_times)+"\n          ")]),t._v(" "),n("div",{staticClass:"item-group"},[n("span",{staticClass:"icon-button"},[n("span",{staticClass:"sr-only"},[t._v("意見數 "+t._s(t.pageData.comment_quantity)+" 項")]),t._v(" "),n("i",{staticClass:"fas fa-comments"})]),t._v("\n            意見數: "+t._s(t.pageData.comment_quantity)+"\n          ")])]),t._v(" "),n("div",{staticClass:"toolbar-item"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.doPrint}},[n("i",{staticClass:"fas fa-print"}),t._v(" 列印")])],1)]),t._v(" "),n("div",{staticClass:"table table--fixed od-table od-table--bordered"},[n("div",{staticClass:"table-row"},[t._m(4),t._v(" "),n("div",{staticClass:"table-cell"},[n("span",[t._v(t._s(t.resourcesField[0]))])])]),t._v(" "),0==t.checkDatasetStatus()?n("div",{staticClass:"table-row"},[t._m(5),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.pageData.unpublish_desc)+"\n          ")])]):t._e(),t._v(" "),1==t.checkDatasetStatus()?n("div",{staticClass:"table-row"},[t._m(6),t._v(" "),n("div",{staticClass:"table-cell"},t._l(t.pageData.resources,(function(e,l){return n("div",{key:l},[n("div",{staticClass:"download-item"},[n("el-button",{staticStyle:{color:"#005F8F"},attrs:{type:"primary",size:"mini",plain:""},on:{click:function(n){return t.addDownload(0,e.url)}}},[n("span",{staticClass:"sr-only"},[t._v(t._s(e.file_format)+"下載按鈕")]),t._v(" "),n("i",{staticClass:"fas fa-download"}),t._v("\n                  "+t._s(e.file_format)+"\n                ")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"mini",id:"resource"+l},on:{click:function(e){return t.openDialog(l)}}},[t._v("\n                  檢視資料\n                ")]),t._v(" "),e.description.length>50?n("span",[t._v(t._s(e.description.slice(0,50))+"...")]):n("span",[t._v(t._s(e.description))])],1),t._v(" "),n("el-dialog",{attrs:{title:"檢視資料",visible:t.dialogVisible[l],"append-to-body":"","close-on-click-modal":""},on:{"update:visible":function(e){return t.$set(t.dialogVisible,l,e)},close:function(e){return t.closeDialog(l)}}},[n("div",{staticClass:"table table--fixed od-table od-table--bordered"},[n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell th"},[n("b",[t._v("資料資源欄位")])]),t._v(" "),n("div",{staticClass:"table-cell"},[n("div",[n("span",[t._v(t._s(t.resourcesField[l]))])])])]),t._v(" "),n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell th"},[n("b",[t._v("檔案格式")])]),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n                      "+t._s(e.file_format)+"\n                    ")])]),t._v(" "),n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell th"},[n("b",[t._v("編碼格式")])]),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n                      "+t._s(e.encoding)+"\n                    ")])]),t._v(" "),n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell th"},[n("b",[t._v("資料量")])]),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n                      "+t._s(e.amount)+"\n                    ")])]),t._v(" "),n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell th"},[n("b",[t._v("資料下載網址")])]),t._v(" "),n("div",{staticClass:"table-cell"},["XLSX"!=e.file_format?n("a",{attrs:{target:"_blank",href:e.url,title:"下載"+e.file_format+"檔案",download:"下載"+e.file_format+"檔案"},on:{click:function(e){return t.addDownload(1)}}},[t._v("\n                        "+t._s(e.url)+"\n                      ")]):n("div",{staticStyle:{color:"#0079B7",cursor:"pointer"},on:{click:function(n){return t.addDownload(0,e.url)}}},[t._v(t._s(e.url))])])]),t._v(" "),n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell th"},[n("b",[t._v("資料資源描述")])]),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n                      "+t._s(e.description)+"\n                    ")])]),t._v(" "),n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell th"},[n("b",[t._v("資料資源品質檢測時間")])]),t._v(" "),"object"==typeof t.pageData.quality_check_time?n("div",{staticClass:"table-cell"},[t._v("\n                      "+t._s(t.pageData.quality_check_time.date.split(".")[0])+"\n                    ")]):n("div",{staticClass:"table-cell"})]),t._v(" "),n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell th"},[n("b",[t._v("資料資源備註欄位")])]),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n                      "+t._s(e.note)+"\n                    ")])]),t._v(" "),void 0!==e.quality_download.csv&&58036!=t.dataset_id&&135272!=t.dataset_id?n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell th"},[n("b",[t._v("多元格式參考資料")])]),t._v(" "),n("div",{staticClass:"table-cell"},[n("div",["object"==typeof e.quality_check_time?n("div",{staticStyle:{color:"red"}},[t._v("\n                          以下連結為本平臺協助提供多元格式參考資料 (轉檔時間："+t._s(e.quality_check_time.date.split(".")[0])+")，\n                          非即時資料， 完整資料請以機關\n                          "),n("a",{attrs:{target:"_blank",href:e.url,title:"前往 原始連結"},on:{click:function(e){return t.addDownload(1)}}},[t._v("\n                            原始連結\n                          ")]),t._v("\n                          為主。\n                        ")]):n("div",{staticStyle:{color:"red"}},[t._v("\n                          以下連結為本平臺協助提供多元格式參考資料，\n                          非即時資料， 完整資料請以機關\n                          "),n("a",{attrs:{target:"_blank",href:e.url,title:"前往 原始連結"},on:{click:function(e){return t.addDownload(1)}}},[t._v("\n                            原始連結\n                          ")]),t._v("\n                          為主。\n                        ")]),t._v(" "),n("div",{staticStyle:{"margin-top":"5px"}},[n("span",{staticStyle:{"margin-right":"10px"}},[t._v("點此下載:")]),t._v(" "),t._l(e.quality_download,(function(e,l){return n("span",{key:l},["ods"!=l&&"xlsx"!=l?n("a",{attrs:{title:"下載 "+l.toUpperCase(),href:e}},[n("div",{staticClass:"custom-button",style:{color:t.qualityColor[l].fontColor,"border-color":t.qualityColor[l].color,background:t.qualityColor[l].background,"margin-left":"5px",padding:"0px"},attrs:{size:"mini",type:"primary",plain:""}},[n("div",{style:{"padding-top":"7px","padding-bottom":"7px","padding-right":"15px","padding-left":"15px"},on:{mouseover:function(e){return t.changeColor(l,t.qualityColor[l].color)},mouseout:function(e){return t.changeColor(l,t.qualityColor[l].color,"out")}}},[t._v("\n                                  "+t._s(l.toUpperCase())+"\n                                ")])])]):t._e()])}))],2)])])]):t._e(),t._v(" "),void 0!==e.quality_download.csv&&58036!=t.dataset_id&&135272!=t.dataset_id?n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell th"},[n("b",[t._v("資料預覽(僅摘錄前10列資料)")])]),t._v(" "),n("div",{staticClass:"table-cell"},[n("Datatable",{attrs:{"table-headers":t.jsonHeader,"table-data":t.jsonData}})],1)]):t._e()])])],1)})),0)]):t._e(),t._v(" "),n("div",{staticClass:"table-row"},[t._m(7),t._v(" "),n("div",{staticClass:"table-cell"},[n("router-link",{attrs:{title:"前往 "+t.pageData.agency_name,to:"/datasets/search?qs="+t.pageData.agency_tid}},[t._v("\n              "+t._s(t.pageData.agency_name)+"\n            ")])],1)]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(8),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.pageData.liaison_displayname)+" ("+t._s(t.pageData.liaison_phone)+")\n          ")])]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(9),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.pageData.updatefreq_desc)+"\n          ")])]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(10),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.pageData.license_name)+"\n          ")])]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(11),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.pageData.charge)+"\n          ")])]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(12),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.$util.handleDate(t.pageData.pubdate,0))+"\n          ")])]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(13),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.pageData.dataset_type_name)+"\n          ")])]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(14),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.$util.handleDate(t.pageData.changed,1))+"\n          ")])]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(15),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.pageData.topic_name)+"\n          ")])]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(16),t._v(" "),n("div",{staticClass:"table-cell"},[""!=t.pageData.category_name?n("router-link",{attrs:{title:"前往 "+t.pageData.category_name,to:"/datasets/search?ct="+t.pageData.category_tid}},[t._v("\n              "+t._s(t.pageData.category_name)+"\n            ")]):t._e()],1)]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(17),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.pageData.category_dataset_name)+"\n          ")])]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(18),t._v(" "),n("div",{staticClass:"table-cell"},[t._l(t.allTags,(function(e,l){return n("el-tag",{key:l,staticStyle:{cursor:"pointer"},attrs:{"disable-transitions":!1}},[n("router-link",{attrs:{title:"前往 "+e.name,to:"/datasets/search?tg="+e.tag_tid+"&q="+e.name}},[t._v("\n                "+t._s(e.name)+"\n              ")])],1)})),t._v(" "),t.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):t.loginFlag&&1==t.checkDatasetStatus()?n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("\n              + 新增關鍵字\n            ")]):t._e(),t._v(" "),t.allTagSuggest.length>0?n("span",[t._v("\n              已建議的關鍵字:\n              "),t._l(t.allTagSuggest,(function(e,l){return n("el-tag",{key:l,attrs:{"disable-transitions":!1}},[t._v("\n                "+t._s(e)+"\n              ")])}))],2):t._e()],2)]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(19),t._v(" "),n("div",{staticClass:"table-cell"},t._l(t.pageData.urls,(function(e,l){return n("span",{key:l},[t.checkUrl(e.url)?n("span",{domProps:{innerHTML:t._s("<a href='"+e.url+"' target='_blank' rel='noreferrer noopener' title='另開視窗 下載 "+e.url+"'>\n              "+e.url+"\n              </a><br>")}}):""!=e.url&&null!=e.url?n("span",{domProps:{innerHTML:t._s("<a href='"+e.url+"' target='_blank' rel='noreferrer noopener' title='另開視窗 前往 "+t.pageData.title+" 相關連結"+(l+1)+": "+e.url+"'>\n              "+e.url+"\n              </a><br>")}}):t._e()])})),0)]),t._v(" "),n("div",{staticClass:"table-row"},[t._m(20),t._v(" "),n("div",{staticClass:"table-cell"},[t._v("\n            "+t._s(t.pageData.note)+"\n          ")])])]),t._v(" "),n("div",{staticClass:"table table--fixed custom-table"},[n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell"},[n("el-card",{attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("相關資料集")])]),t._v(" "),t.pageData.related_dataset.length>0?n("ul",{staticClass:"aside-list"},t._l(t.pageData.related_dataset,(function(e,l){return n("li",{key:l,staticClass:"aside-item"},[n("router-link",{staticClass:"aside-item-title",attrs:{title:"前往 "+e.title,to:"/dataset/"+e.nid}},[t._v("\n                    "+t._s(e.title)+"\n                  ")])],1)})),0):n("div",{staticClass:"nodata"},[t._v("\n                目前沒有相關資料集\n              ")])])],1),t._v(" "),n("div",{staticClass:"table-cell"},[n("el-card",{attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("活化應用")]),t._v(" "),n("nuxt-link",{staticStyle:{float:"right"},attrs:{title:"另開視窗前往 活化應用",to:"/applications?name="+t.pageData.title,target:"_blank"}},[t._v("\n                  查看全部\n                ")])],1),t._v(" "),t.pageData.example_application_list.length>0?n("div",{staticClass:"custom-carousel"},[n("el-carousel",{ref:"car",attrs:{trigger:"click",arrow:"never","indicator-position":"none",interval:1e4}},[t._l(t.pageData.example_application_list,(function(e,l){return n("el-carousel-item",{key:l},[n("ul",{staticClass:"normal-list is-image"},[n("li",{staticClass:"normal-item"},[n("div",{staticClass:"normal-item-image"},[null!=e.featured_image?n("img",{attrs:{src:t.api_url+e.featured_image[0].download_path,alt:e.title+"應用圖片"}}):t._e()]),t._v(" "),n("router-link",{staticClass:"normal-item-title",attrs:{title:"前往 "+e.title,to:"/applications/"+e.sno}},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"normal-item-content",domProps:{innerHTML:t._s(e.abstract.slice(0,100))}})],1)])])})),t._v(" "),n("el-button",{staticClass:"custom-carousel-btn-left",attrs:{size:"medium"},on:{click:function(e){return t.carPrev()}}},[n("span",{staticClass:"sr-only"},[t._v("上一個")]),t._v(" "),n("i",{staticClass:"fas fa-angle-left"})]),t._v(" "),n("el-button",{staticClass:"custom-carousel-btn-right",on:{click:function(e){return t.carNext()}}},[n("span",{staticClass:"sr-only"},[t._v("下一個")]),t._v(" "),n("i",{staticClass:"fas fa-angle-right"})])],2)],1):n("div",{staticClass:"nodata"},[t._v("\n                目前沒有相關活化應用\n              ")])])],1)])]),t._v(" "),n("div",{staticClass:"response"},[n("h3",[t._v("回應")]),t._v(" "),t.loginFlag&&1==t.checkDatasetStatus()?n("el-button",{attrs:{type:"success",size:"mini",id:"responseBtn"},on:{click:function(e){t.dialogAddResponse=!0}}},[n("i",{staticClass:"fas fa-plus"}),t._v(" 發表新回應\n          ")]):t._e(),t._v(" "),t.loginFlag?n("el-dialog",{attrs:{title:"發表新回應","append-to-body":!0,visible:t.dialogAddResponse},on:{close:t.resetResponseDialog,"update:visible":function(e){t.dialogAddResponse=e}}},[n("el-form",{ref:"responseForm",staticClass:"od-form od-form--type-1",attrs:{model:t.responseForm,rules:t.rules,"validate-on-rule-change":!0,"label-position":"left","label-width":"140px"}},[n("el-form-item",{attrs:{label:"您的名字"}},[t._v("\n              "+t._s(t.$util.getUserData("account"))+"\n            ")]),t._v(" "),t._l(t.responseForm.mail,(function(e,l){return n("div",{key:l},[0==l?n("el-form-item",{attrs:{label:"聯絡電子郵件信箱",rules:t.rules.mail,prop:"mail."+l}},[n("div",{staticClass:"flex-item item-main"},[n("el-input",{attrs:{type:"email",id:"mail."+l},model:{value:t.responseForm.mail[l],callback:function(e){t.$set(t.responseForm.mail,l,e)},expression:"responseForm.mail[index]"}})],1)]):n("el-form-item",{attrs:{rules:t.rules.responseValuesOther,prop:"mail."+l}},[n("div",{staticClass:"flex-group"},[n("div",{staticClass:"flex-item item-main"},[n("el-input",{attrs:{type:"email"},model:{value:t.responseForm.mail[l],callback:function(e){t.$set(t.responseForm.mail,l,e)},expression:"responseForm.mail[index]"}})],1),t._v(" "),n("div",{staticClass:"flex-item"},[n("el-button",{attrs:{type:"danger",plain:""},on:{click:function(n){return n.preventDefault(),t.removeResponseValue(e)}}},[n("span",{staticClass:"sr-only"},[t._v("移除")]),t._v(" "),n("i",{staticClass:"fas fa-trash-alt"})])],1)])])],1)})),t._v(" "),t.responseForm.mail.length<5?n("el-form-item",[n("el-button",{attrs:{type:"success",size:"small"},on:{click:t.addResponseValue}},[n("i",{staticClass:"fas fa-plus"}),t._v(" 新增另一個項目\n              ")])],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"意見類型",prop:"comment_type"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"請選擇",id:"comment_type"},model:{value:t.responseForm.comment_type,callback:function(e){t.$set(t.responseForm,"comment_type",e)},expression:"responseForm.comment_type"}},t._l(t.opinionOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value,"aria-label":t.label}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"身份別",prop:"comment_identity"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇",id:"comment_identity"},model:{value:t.responseForm.comment_identity,callback:function(e){t.$set(t.responseForm,"comment_identity",e)},expression:"responseForm.comment_identity"}},t._l(t.identityOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"產業領域",prop:"comment_industry"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"請選擇",id:"comment_industry"},model:{value:t.responseForm.comment_industry,callback:function(e){t.$set(t.responseForm,"comment_industry",e)},expression:"responseForm.comment_industry"}},t._l(t.industryOptions,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"標題",prop:"title"}},[n("el-input",{attrs:{placeholder:"請輸入",id:"title"},model:{value:t.responseForm.title,callback:function(e){t.$set(t.responseForm,"title",e)},expression:"responseForm.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"建議原因",prop:"body"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"請輸入",id:"body"},model:{value:t.responseForm.body,callback:function(e){t.$set(t.responseForm,"body",e)},expression:"responseForm.body"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("responseForm")}}},[t._v("儲存")])],1)],2)],1):t._e(),t._v(" "),t.loginFlag?t._e():n("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[t._v("\n          發表回應前，請先"),n("router-link",{attrs:{title:"前往 登入",to:"/login"}},[t._v("登入")])],1),t._v(" "),t.comment.length>0?n("ul",{staticClass:"response-list"},t._l(t.comment,(function(e,l){return n("li",{key:l,staticClass:"response-item user"},[t._m(21,!0),t._v(" "),n("div",{staticClass:"response-item-main"},[n("div",{staticClass:"response-item-main-header",staticStyle:{color:"#73737D"}},[n("span",[t._v("\n                  "+t._s(e.user_main.account)+"\n                ")]),t._v("於"),n("span",[t._v(t._s(t.$util.handleDate(e.user_main.created,1))+" ")]),t._v("回應\n                ")]),t._v(" "),n("div",{staticClass:"response-item-main-container"},[n("div",{staticClass:"title"},[t._v(t._s(e.user_main.title))]),t._v(" "),n("div",{staticClass:"content"},[t._v("\n                  "+t._s(e.user_main.body)+"\n                ")])]),t._v(" "),t.loginFlag?t._e():n("div",{staticClass:"response-item-main-footer"},[t._v("\n                發表回應前，請先"),n("router-link",{attrs:{title:"前往 登入",to:"/login"}},[t._v("登入")])],1),t._v(" "),n("ul",{staticClass:"response-re-list"},[t.$util.emptyObject(e.agency_r1)?t._e():n("li",{staticClass:"response-item od"},[t._m(22,!0),t._v(" "),n("div",{staticClass:"response-item-main"},[n("div",{staticClass:"response-item-main-header"},[n("span",[t._v("\n                        "+t._s(e.agency_r1.account)+"\n                      ")]),t._v("於"),n("span",[t._v(t._s(t.$util.handleDate(e.agency_r1.created,1))+" ")]),t._v("回應\n                      "),n("div",{staticClass:"floor"},[t._v("機關回復")])]),t._v(" "),n("div",{staticClass:"response-item-main-container"},[n("div",{staticClass:"title"},[t._v(t._s(e.agency_r1.title))]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.agency_r1.body))])]),t._v(" "),t.loginFlag?t._e():n("div",{staticClass:"response-item-main-footer"},[t._v("\n                      發表回應前，請先"),n("router-link",{attrs:{title:"前往 登入",to:"/login"}},[t._v("登入")])],1)])]),t._v(" "),t._l(e.agency_supply_r1,(function(e,l){return n("li",{key:l,staticClass:"response-item od"},[t._m(23,!0),t._v(" "),n("div",{staticClass:"response-item-main"},[n("div",{staticClass:"response-item-main-header"},[n("span",[t._v(t._s(e.account))]),t._v("於"),n("span",[t._v(t._s(t.$util.handleDate(e.created,1))+" ")]),t._v("回應\n                      "),n("div",{staticClass:"floor"},[t._v("機關補充")])]),t._v(" "),n("div",{staticClass:"response-item-main-container"},[n("div",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"content"},[t._v("\n                        "+t._s(e.body)+"\n                      ")])]),t._v(" "),t.loginFlag?t._e():n("div",{staticClass:"response-item-main-footer"},[t._v("\n                      發表回應前，請先"),n("router-link",{attrs:{title:"前往 登入",to:"/login"}},[t._v("登入")])],1)])])})),t._v(" "),t.$util.emptyObject(e.user_r1)?t._e():n("li",{staticClass:"response-item user"},[t._m(24,!0),t._v(" "),n("div",{staticClass:"response-item-main"},[n("div",{staticClass:"response-item-main-header"},[n("span",[t._v("\n                        "+t._s(e.user_r1.account)+"\n                      ")]),t._v("於"),n("span",[t._v(t._s(t.$util.handleDate(e.user_r1.created,1))+" ")]),t._v("回應\n                      "),n("div",{staticClass:"floor"},[t._v("民眾回復")])]),t._v(" "),n("div",{staticClass:"response-item-main-container"},[n("div",{staticClass:"title"},[t._v(t._s(e.user_r1.title))]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.user_r1.body))])]),t._v(" "),t.loginFlag?t._e():n("div",{staticClass:"response-item-main-footer"},[t._v("\n                      發表回應前，請先"),n("router-link",{attrs:{title:"前往 登入",to:"/login"}},[t._v("登入")])],1)])])],2),t._v(" "),n("ul",{staticClass:"response-re-list level2"},[t.$util.emptyObject(e.agency_r2)?t._e():n("li",{staticClass:"response-item od"},[t._m(25,!0),t._v(" "),n("div",{staticClass:"response-item-main"},[n("div",{staticClass:"response-item-main-header"},[n("span",[t._v("\n                        "+t._s(e.agency_r2.account)+"\n                      ")]),t._v("於"),n("span",[t._v(t._s(t.$util.handleDate(e.agency_r2.created,1))+" ")]),t._v("回應\n                      "),n("div",{staticClass:"floor"},[t._v("機關二次回復")])]),t._v(" "),n("div",{staticClass:"response-item-main-container"},[n("div",{staticClass:"title"},[t._v(t._s(e.agency_r2.title))]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.agency_r2.body))])]),t._v(" "),t.loginFlag?t._e():n("div",{staticClass:"response-item-main-footer"},[t._v("\n                      發表回應前，請先"),n("router-link",{attrs:{title:"前往 登入",to:"/login"}},[t._v("登入")])],1)])]),t._v(" "),t._l(e.agency_supply_r2,(function(e,l){return n("li",{key:l,staticClass:"response-item od"},[t._m(26,!0),t._v(" "),n("div",{staticClass:"response-item-main"},[n("div",{staticClass:"response-item-main-header"},[n("span",[t._v(t._s(e.account))]),t._v("於"),n("span",[t._v(t._s(t.$util.handleDate(e.created,1))+" ")]),t._v("回應\n                      "),n("div",{staticClass:"floor"},[t._v("機關補充")])]),t._v(" "),n("div",{staticClass:"response-item-main-container"},[n("div",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"content"},[t._v("\n                        "+t._s(e.body)+"\n                      ")])]),t._v(" "),t.loginFlag?t._e():n("div",{staticClass:"response-item-main-footer"},[t._v("\n                      發表回應前，請先"),n("router-link",{attrs:{title:"前往 登入",to:"/login"}},[t._v("登入")])],1)])])})),t._v(" "),t.$util.emptyObject(e.user_r2)?t._e():n("li",{staticClass:"response-item user"},[t._m(27,!0),t._v(" "),n("div",{staticClass:"response-item-main"},[n("div",{staticClass:"response-item-main-header"},[n("span",[t._v("\n                        "+t._s(e.user_r2.account)+"\n                      ")]),t._v("於"),n("span",[t._v(t._s(t.$util.handleDate(e.user_r2.created,1))+" ")]),t._v("回應\n                      "),n("div",{staticClass:"floor"},[t._v("民眾回復")])]),t._v(" "),n("div",{staticClass:"response-item-main-container"},[n("div",{staticClass:"title"},[t._v(t._s(e.user_r2.title))]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.user_r2.body))])]),t._v(" "),t.loginFlag?t._e():n("div",{staticClass:"response-item-main-footer"},[t._v("\n                      發表回應前，請先"),n("router-link",{attrs:{title:"前往 登入",to:"/login"}},[t._v("登入")])],1)])])],2)])])})),0):t._e()],1)])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"icon-button"},[e("span",{staticClass:"sr-only"},[this._v("金標章")]),this._v(" "),e("i",{staticClass:"fas fa-award"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"icon-button"},[e("span",{staticClass:"sr-only"},[this._v("銀標章")]),this._v(" "),e("i",{staticClass:"fas fa-award"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"icon-button"},[e("span",{staticClass:"sr-only"},[this._v("銅標章")]),this._v(" "),e("i",{staticClass:"fas fa-award"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"icon-button"},[e("span",{staticClass:"sr-only"},[this._v("白金標章")]),this._v(" "),e("i",{staticClass:"fas fa-crown"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("主要欄位說明")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("下架說明")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("資料資源下載網址")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("提供機關")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("提供機關聯絡人姓名")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("更新頻率")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("授權方式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("計費方式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("上架日期")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("資料集類型")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("詮釋資料更新時間")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("主題分類")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("服務分類")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("資料集分類")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("關鍵字")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("相關網址")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"table-cell th"},[e("b",[this._v("備註")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar"},[e("i",{staticClass:"far fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar"},[e("i",{staticClass:"fas fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar"},[e("i",{staticClass:"fas fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar"},[e("i",{staticClass:"far fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar"},[e("i",{staticClass:"fas fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar"},[e("i",{staticClass:"fas fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar"},[e("i",{staticClass:"far fa-user"})])}],!1,null,"51840195",null));e.default=h.exports}}]);